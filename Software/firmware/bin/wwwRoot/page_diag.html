
<!DOCTYPE html>

<html>

<head>
   
   <meta http-equiv="content-type" content="text/html; charset=UTF-8">

   <title>PHI Admin Console: Diagnostics</title>

   <!-- shared PHI stuff -->
   <script src="js/phi.js"></script>
   <link rel="stylesheet" type="text/css" href="css/phi.css">

   <!-- add this if you want super simple slider controls -->
   <link rel="stylesheet" type="text/css" href="css/slider.css" />
   <script type="text/javascript" src="js/slider.js"></script>

   <script>

      var slider;
      
      function initSlider() {
        
        slider = new Slider(
                      "slider",
                      "horizontal",
                      201,                  // length (width for horizontal)
                      201);                 // range [0, 200]
        
        slider.onChange = sliderChanged;
        slider.setStart(100);               // must call after setting .onChange
        slider.show();
      }

      function sliderChanged(value) {
        document.getElementById("slider_val").innerHTML = value - 100 + " %";
      }

      function pageLoaded()
      {
        // init motor control slider
        initSlider();
        
        // get init state
        phi_getInitState();
      }      

      function parseJsonReply(obj) {
        var num = obj.reply.length;
        for (var i = 0 ; i < num ; i++) {
          var reply = obj.reply[i];
          // alert("obj.reply[" + i + "].cmd = " + reply.cmd);
          switch (reply.cmd) {
            case "getInitState":
              document.getElementById("phi_peripheral_init").innerHTML = reply.initPeriph;
              break;
            case "initPeripherals":
              document.getElementById("phi_init_request_status").innerHTML = reply.status;
              phi_getInitState();
              break;
            default:
              alert("unknown JSON reply - cmd: '" + reply.cmd + "'");
              break;
          }
        }
      }


      function phi_getInitState() {
        // request Phi initialization status
        sendJsonRequest("req : [ {cmd:getInitState} ]");
      }

      function phi_initPeripherals() {
        sendJsonRequest("req : [ {cmd:initPeripherals} ]");
      }

      function testSize() {
        alert('foo');
        slider.moveSlide(100);
      }

   </script>

</head>

<body onload="pageLoaded()">

   <table style="background-color:black;" border="0" cellpadding="5">
      <col width=500>
      <tr><td class="phi_page_title"> Diagnostics Lucas </td></tr>
   </table>
   
   <h3>Peripherals</h3>
   
   <table class="phi_indent_1" border="0" cellpadding="5">
      <col>
      <col width=200>

      <tr> 
         <td class="phi_label">State</td>
         <td class="phi_value">
            &nbsp; <span id="phi_peripheral_init"> </span>
         </td>
         <td style="padding-left:30px;">
            <input type="button" onclick="phi_initPeripherals()" value="Initialize Now">
         </td>
         <td id="phi_init_request_status" class="phi_value">
         </td>
      </tr>

   </table>

   <h3>Motor Control</h3>
   
   <table class="phi_indent_1" border="0" cellpadding="5">
      <col>
      <col width=250>
      
      <tr> 
         <td class="phi_label">Select Leg:</td>
         <td style="padding-left:30px;">
            <select>
               <option value="rf">Right Front</option>
               <option value="lf">Left Front</option>
               <option value="rr">Right Rear</option>
               <option value="lr">Left Rear</option>
            </select>             
         </td>
      </tr>

      <tr> 
         <td class="phi_label">Select Joint:</td>
         <td style="padding-left:30px;">
            <select>
               <option value="r">Hip Rotator</option>
               <option value="t">Hip Flexor</option>
               <option value="k">Knee Flexor</option>
            </select>             
         </td>
      </tr>
      
      <tr> 
         <td class="phi_label">Speed:</td>
         <td style="padding-left:30px;">
               <span id="slider"></span>
         </td>
         <td>
            <span id="slider_val"></span>
         </td>
      </tr>

   </table>

   <br/>
   <br/>
   
   <input type="button" onclick="testSize()" value="Test Size">

   <br/>
   <br/>

</body>
</html>